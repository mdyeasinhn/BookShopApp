!function(a){"use strict";a(document).ready(function(){var n,e,t,i,r,o;n=a(".woocommerce-product-search"),e=a(".ajax-search .woocommerce-product-search .search-field"),t=a(".ajax-search-result"),i=wp.template("ajax-live-search-template"),r=a(".input-dropdown-inner"),o=a("> .list-wrapper",r),a("body").on("click",function(){t.hide(),o.slideUp(100),r.removeClass("dd-shown")}),a(".input-dropdown-inner > a").on("click",function(e){return e.preventDefault(),r.hasClass("dd-shown")?(r.removeClass("dd-shown"),o.slideUp(100)):(r.addClass("dd-shown"),o.slideDown(100)),t.hide(),!1}),a(".input-dropdown-inner > .list-wrapper").on("click","a",function(e){e.preventDefault();var n=a(this).data("val"),e=a(this).text();a(".input-dropdown-inner > .list-wrapper").find(".current-item").removeClass("current-item"),a(this).parent().addClass("current-item"),0!=n?o.find("ul:not(.children) > li:first-child").show():0==n&&o.find("ul:not(.children) > li:first-child").hide(),a(".input-dropdown-inner > a span").text(e),a(".input-dropdown-inner > select").val(n).trigger("cat_selected"),o.slideUp(100),r.removeClass("dd-shown")}),a(".input-dropdown-inner > select").change(function(){var e=a(this).val(),n=a(this).find("option:selected").text();a(".input-dropdown-inner > .list-wrapper").find(".current-item").removeClass("current-item"),a(this).parent().addClass("current-item"),0!=e?o.find("ul:not(.children) > li:first-child").show():0==e&&o.find("ul:not(.children) > li:first-child").hide(),a(".input-dropdown-inner > a span").text(n)}),e.length&&e.keyup(function(){var e;2<this.value.length?(e=a('select[name="product_cat"]',n).val(),a.ajax({url:bookoryAjax.ajaxurl,type:"post",data:{action:"bookory_ajax_search_products",query:this.value,product_cat:e},beforeSend:function(){n.addClass("loading")},success:function(e){n.removeClass("loading");e=a.parseJSON(e);t.empty(),t.show(),a.each(e,function(e,n){t.append(i({url:n.url,title:n.value,img:n.img,price:n.price}))})}})):t.hide()}).on("click",function(e){e.stopPropagation()}).on("focus",function(e){o.slideUp(100),r.removeClass("dd-shown"),2<this.value.length&&t.show()})})}(jQuery);